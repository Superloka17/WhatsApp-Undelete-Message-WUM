<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>WhatsApp Undelete Plus</title>
  <link rel="stylesheet" href="popup.css">
  <style>
    /* Quick inline fix for toggle layout — looks beautiful instantly */
    .setting-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 0;
    }
    .toggle {
      position: relative;
      display: inline-block;
      width: 52px;
      height: 28px;
      flex-shrink: 0;
    }
    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      border-radius: 34px;
      transition: .3s;
    }
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      border-radius: 50%;
      transition: .3s;
    }
    .toggle input:checked + .toggle-slider {
      background-color: #25D366;
    }
    .toggle input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }
    .setting-info {
      flex: 1;
    }
    .setting-title {
      font-weight: 600;
      color: #e0e0e0;
    }
    .setting-desc {
      font-size: 12px;
      color: #aaa;
    }
  </style>
</head>
<body>
  <div class="header">
    <h2>WhatsApp Undelete Plus</h2>
    <div class="header-buttons">
      <button id="download" title="Download all recovered messages">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        Download
      </button>
      <button id="clear">Clear All</button>
    </div>
  </div>

  <!-- Settings Section -->
  <div class="settings">
    <!-- Recover Deleted Messages (always ON – no toggle needed) -->
    <div class="setting-item">
      <label class="toggle">
        <input type="checkbox" id="enableMessageRecovery" checked disabled>
        <span class="toggle-slider"></span>
      </label>
      <div class="setting-info">
        <div class="setting-title">Recover Deleted Messages</div>
        <div class="setting-desc">Always active — saves every message you see</div>
      </div>
    </div>

    <!-- Hide Read Receipts (Blue Ticks) -->
    <div class="setting-item">
      <label class="toggle">
        <input type="checkbox" id="hideReceipts" checked>
        <span class="toggle-slider"></span>
      </label>
      <div class="setting-info">
        <div class="setting-title">Ghost Mode</div>
        <div class="setting-desc">Read messages without sending blue ticks</div>
      </div>
    </div>

    <!-- Optional: Hide Typing Indicator (if you ever bring it back) -->
    <!--
    <div class="setting-item">
      <label class="toggle">
        <input type="checkbox" id="hideTyping" checked>
        <span class="toggle-slider"></span>
      </label>
      <div class="setting-info">
        <div class="setting-title">Hide Typing...</div>
        <div class="setting-desc">Others won't see when you're typing</div>
      </div>
    </div>
    -->
  </div>

  <div id="stats" class="stats"></div>
  <div id="list"></div>
  <div id="empty" style="text-align:center; padding:20px; color:#888;">
    No deleted messages yet.<br>
    <small>They will appear here when someone deletes a message you've seen.</small>
  </div>

  <script src="popup.js"></script>
</body>
</html>